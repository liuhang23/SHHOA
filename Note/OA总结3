一.权限模块 （Web基本方式）
   1.权限 ： 控制功能的使用
   2.Web应该中的权限 ： 每个功能都有相应URL地址，对功能的控制就是对URL地址的访问控制。
   3.权限方案 ： 用户 *----* 角色 *----* 权限
           *用户的权限就是用户的所有角色的权限的合集
           *一个功能是否能被某用户使用，是判断用户权限中是否有这个功能的使用许可
   4.要点说明 ： 
            权限就是控制功能的使用（功能对应着URL）。
			对功能的控制就是对URL的访问控制。
			在我们的程序中，一个功能对应一个或两个URL：
			1，例如列表或删除功能，只对应一个URL.
			2，例如添加或修改功能，对应两个URL：..add, ..addUI
		                  
   4.与权限相关的功能具体有哪些：
		4.1初始化数据(安装) ：权限数据，超级管理员...
			 1*建立权限实体 ： javaBean(privilege) -----xxx.hbm.xml ----建表
			 2*实现初始化权限数据的功能 （可支持多种不同数据库） ： 
			 	    insert into ...
			   在util包中新建（安装权限数据类）： Installer.java（顶级菜单对二级菜单分类）
			 
		4.2分配权限 ：1.给角色分配权限。（类似修改）   RoleAction
		  			   选多个 pid=1&pid=2&pid=3
				     2.用户的权限就是用户所有角色的权限。
				       jquery选择器 ： $("[name=privilegeIds]").attr("checked",this.checked);  实现全选，通过id查找
				     ...
		4.3使用权限 ：
		    1，登录、注销、主页面。(UserAction)
		      *登陆<s:textfiled />
		     	   <s:passwrod showPassword="false">
		      
		      *请求重定向地址：<result name="toIndex" type="redirect">/index.jsp</result>
		      
		      *显示错误信息   
					Action中
						addFieldError("name", "有错了！");
						addFieldErroe("login","登录名或密码错误");
					JSP中：
						<s:fielderror fieldName="name"/>
						<s:fielderror/>	显示全部错误消息
						
			 *主页面
			 	<frameset rows=“100px,*,30px”>
				    <frame src=“top.jsp”>
				    <frameset cols=“150px,*”>
				        <frame name=“left” src=“left.jsp”>
				        <frame name=“right” src=“right.jsp”>
				    </frameset>
				    <frame src=“bottom.jsp”>
				</frameset>
		    			
			2，左侧的菜单是根据权限显示的。
				*1.显示所有  （目录结构是程序安装初始化时，管理员权限目录就固定）
				 **目录结构使用最大的作用域Application（整个应用程序都共享）,将不会变的值存在内存中缓存起来，减少每次查询数据库
				 **使用InitListener implements ServletContextListener{  (监听器)
				  （会产生懒加载异常）  解决方法 : 关闭懒加载功能  lazy = "false"
				   //产生懒加载异常，主要是未加载相关联的对象信息，session已经关闭。  可以关闭懒加载特性
				      public void contextInitialized(ServletContextEvent sce) {
							// 获取容器与相关的Service对象  获取同一个容器对象 WebApplicationContextUtils
							ApplicationContext ac = WebApplicationContextUtils.getWebApplicationContext(sce.getServletContext());
							PrivilegeService privilegeService = (PrivilegeService) ac.getBean("privilegeServiceImpl");
					
							// 准备数据：topPrivilegeList
							List<Privilege> topPrivilegeList = privilegeService.findTopList();
							sce.getServletContext().setAttribute("topPrivilegeList", topPrivilegeList);
							System.out.println("------------> 已准备数据 <------------");
						}
					
						public void contextDestroyed(ServletContextEvent arg0) {
							
						}  
					}	
					
				*2.根据权限显示
			
			3，右侧页面中的链接是根据权限显示的。
			4，拦截每一个action请求，验证用户是否有权限访问...
           